---
layout: default
title: 【python】pygame实现简单的俄罗斯方块
---
<h2>{{ page.title }}</h2>
<p>shapes.py定义了方块类型, common.py定义了一些常量，及地图相关数组等</p>
<p>common.py</p>
#!/usr/bin/env python2.7
#-*- encoding:utf-8 -*-

# 初始化地图，并为活动空间外墙壁赋值
def init_map(max_x, max_y, wall_widith, wall_height):  
    maps = [[0 for col in range(max_x)]for cell in range(max_y)]  
    for y in range(max_y):  
        for x in range(max_x):  
            if x < wall_widith or x > max_x - wall_widith - 1 or y > max_y - wall_height-1:  
                    maps[y][x] = 2 
    return maps  

SCREEN_SIZE = WIDTH, HEIGHT = [480, 660]  
BACKGROUND_COLOR = (123, 22, 33)  
BLOCK_COLOR = (33, 124, 33)  
WALL_COLOR = (14, 233, 4)
OUTER_WALL_COLOR = (64, 85, 100)
OUTER_WALL_RECT_COLOR = (124, 85, 100)  
 
WALL_WIDTH = 3  
WALL_HEIGHT = 3  
#地图从(0,0)坐标开始画  
MAP_BEGIN_POINT = [0, 0]  
#地图的最大行数和列数  
MAX_X, MAX_Y = 16, 22  
#方块的边长  
RECT_SIZE = [WIDTH/MAX_X, HEIGHT/MAX_Y]  
#屏幕中央的x坐标  
CENTER_X = int(MAX_X / 2) - 3  
#地图的数据  
MAP_DATA = init_map(MAX_X, MAX_Y, WALL_WIDTH, WALL_HEIGHT)  
#方块的起始位置  
BLOCK_START_POINT = [CENTER_X, -1]  
#每秒的帧数  
FPS = 40  
#方块的下落速度  
SPEED = 1  
#方块自由体积下落的时间间隔  
FALL_PER_SECONDS = 1  

</code></pre>
<p>shapes.py</p>
#!/usr/bin/env python2.7
#-* coding:UTF-8 -*
import random

NT_SHAPES = [
    [
        [1,1,0],
        [0,1,0],
        [0,1,0]
    ],
    [
        [1,1,0],
        [0,1,1],
        [0,0,0]
    ],
    [
        [0,1,1],
        [1,1,0],
        [0,0,0]
    ],
    [
        [1,1,1],
        [0,1,0],
        [0,0,0]
    ],
    [
        [0,0,0,0],
        [1,1,1,1],
        [0,0,0,0],
        [0,0,0,0]
    ],
    [
        [0,1,1],
        [0,1,0],
        [0,1,0]
    ],
    [
        [1,1],
        [1,1]
    ]
]

# 随机生成方块
def get_shape():
    return random.choice(NT_SHAPES)

# 90°旋转方块
def rotate_shape(shape):
    print shape
    h = len(shape)
    w = len(shape[0])
    print w,h

    new_shape = [[0 for col in range(w)] for row in range(h)]
    for x in range(w):
        for y in range(h-1, -1, -1):
            new_shape[x][y] = shape[y][h-1-x]

    return new_shape

</code></pre>

<p>未完待续</p>
